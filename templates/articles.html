{% extends "layout.html" %}

{% block body %}
<div class="text-center mb-5 pb-5 border-bottom">
  <h1 class="display-4 fw-bold">Articles</h1>
  <p class="text-secondary">A collection of thoughts and stories.</p>
  {% if request.user.is_authenticated %}
  <a href="{% url 'article_urls:article_add' %}" class="btn btn-sm btn-outline-secondary mt-2">New Post</a>
  {% endif %}
</div>

{% if articles %}
<div class="article-list">
  {% for article in articles %}
  <article class="text-center mb-5">
    <header>
      <div class="small text-uppercase text-secondary mb-2 tracking-widest">
        {{ article.created_at|date:"F d, Y" }}
      </div>
      <h2 class="h1">
        <a href="{% url 'article_urls:article_detail' article.id %}" class="text-decoration-none text-reset link-dim">
          {{ article.title }}
        </a>
      </h2>
      <div class="small text-secondary mt-2">
        by <a href="{% url 'user_urls:profile' article.author.username %}" class="text-reset">@{{ article.author.username }}</a>
      </div>
    </header>
    <div class="mt-3 text-secondary">
      {{ article.content|striptags|truncatechars:150 }}
    </div>
    <footer class="mt-3">
      <a href="{% url 'article_urls:article_detail' article.id %}"
        class="small text-uppercase text-reset fw-bold tracking-widest text-decoration-none border-bottom">Read More</a>
    </footer>
  </article>
  {% endfor %}
</div>
{% else %}
<div class="py-5 text-center">
  <p class="lead text-secondary">Nothing has been published here yet.</p>
  {% if request.user.is_authenticated %}
  <a href="{% url 'article_urls:article_add' %}" class="btn btn-primary">Create First Post</a>
  {% endif %}
</div>
{% endif %}

<style>
  .tracking-widest {
    letter-spacing: 0.15em;
  }

  .link-dim {
    transition: opacity 0.2s;
  }

  .link-dim:hover {
    opacity: 0.7;
  }

  article {
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }
</style>
{% endblock %}